\PassOptionsToPackage{unicode}{hyperref}
\documentclass[aspectratio=1610, captions=tableheading, 11pt]{beamer}
\usepackage{booktabs}
% Load packages you need here
\usepackage{polyglossia}
\setmainlanguage{german}

\usepackage{csquotes}

%% Macros for Quote

\def\signed #1{{\leavevmode\unskip\nobreak\hfil\penalty50\hskip1em
  \hbox{}\nobreak\hfill #1%
  \parfillskip=0pt \finalhyphendemerits=0 \endgraf}}

\newsavebox\mybox
\newenvironment{aquote}[1]
  {\savebox\mybox{#1}\begin{quote}}
  {\vspace*{5mm}\signed{\usebox\mybox}\end{quote}}
    
%% \Macros

\usepackage{appendixnumberbeamer} 

\usepackage{caption}
\usepackage{varwidth}
\DeclareCaptionFormat{myformat}{%
  % #1: label (e.g. "Table 1")
  % #2: separator (e.g. ": ")
  % #3: caption text
  \begin{varwidth}{\linewidth}%
    \centering
    #1#2#3%
  \end{varwidth}%
}

%\AtBeginSection[]{
%  \begin{frame}
%  \vfill
%  \centering
%  \begin{beamercolorbox}[sep=8pt,center,shadow=true,rounded=true]{title}
%    \usebeamerfont{title}\insertsectionhead\par%
%  \end{beamercolorbox}
%  \vfill
%  \end{frame}
%}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage[mathrm=sym]{unicode-math}
\usepackage{relsize}
\usepackage{listings}

\usepackage[
  locale=DE,                 % deutsche Einstellungen
  separate-uncertainty=true, % immer Fehler mit \pm
  per-mode=reciprocal,       % ^-1 für inverse Einheiten
  % alternativ:
  % per-mode=reciprocal, % m s^{-1}
  % decimal-marker=., % . statt , f�r Dezimalzahlen
]{siunitx}

\usepackage{hyperref}
\usepackage{bookmark}
\usepackage[utf8]{inputenc}

% load the theme after all packages

\usetheme[
  showtotalframes, % show total number of frames in the footline
]{tudo}

% Put settings here, like
\unimathsetup{
  math-style=ISO,
  bold-style=ISO,
  nabla=upright,
  partial=upright,
  mathrm=sym,
}

% Flow chart stuff

\usepackage{tikz-feynman}
\usepackage{xfrac}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}


\tikzstyle{block} = [rectangle, draw, thick, fill=tugreen!20, 
    text width=20em, text centered, minimum height=2em]

 \tikzstyle{blockH} = [rectangle, draw, thick, fill=tugreen, 
    text width=20em, text centered, minimum height=2em]

\tikzstyle{smallblock} = [rectangle, draw, thick, fill=tugreen!20, 
    text width=14em, text centered, minimum height=2em]
\tikzstyle{smallblockH} = [rectangle, draw, thick, fill=tugreen, 
    text width=14em, text centered, minimum height=2em]

\tikzstyle{line} = [draw, -latex']


% Evaluate at command

\NewDocumentCommand{\evalat}{sO{\big}mm}{%
  \IfBooleanTF{#1}
   {\mleft. #3 \mright|_{#4}}
   {#3#2|_{#4}}%
}


\setbeamertemplate{caption}{\raggedright\insertcaption\par}

% nur wenn akkurat auf dem Rechner installiert ist:
\setsansfont{Akkurat Light Office}[
  BoldFont=Akkurat Office Bold,
]


\author[jean-marco.alameddine@udo.edu]{Jean-Marco Alameddine}
\title{Masterarbeit - Aktueller Stand}      
\date[01.11.2019]{01.11.2019}

\institute[%
  {\includegraphics[height=0.9\headerheight]{e5b.pdf}}%
]{Technische Universität Dortmund}

\newcommand\CC{C\nolinebreak[4]\hspace{-.05em}\raisebox{.4ex}{\relsize{-3}{\textbf{++}}}\:}
\titlegraphic{\includegraphics[height=0.5\textheight]{plots/muon_path.pdf}}

\usepackage{color}
\newcommand{\Hilight}{\makebox[0pt][l]{\color{tugreen}\rule[-4pt]{0.65\linewidth}{14pt}}}

\begin{document}



%%% TITLE

\begin{frame}
  \maketitle
\end{frame}

%%% Content

\begin{frame}{Inhalt}
   \begin{columns}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=tugreen}
            \setbeamercolor{block body}{fg=darkgray, bg=tulight}

            \begin{block}{1. Einführung in PROPOSAL}
              \centering
                \vspace{2mm}
              \includegraphics[height=0.15\textheight]{plots/muon_path.pdf}
                \vspace{2mm}
            \end{block}
       \end{column}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=tugreen}
            \setbeamercolor{block body}{fg=darkgray, bg=tulight}

            \begin{block}{2. Seltene Prozesse}

            \end{block}
       \end{column}
   \end{columns}
   \begin{columns}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=tugreen}
            \setbeamercolor{block body}{fg=darkgray, bg=tulight}

            \begin{block}{3. Schauerpropagation}
            \end{block}
       \end{column}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=tugreen}
            \setbeamercolor{block body}{fg=darkgray, bg=tulight}

           \begin{block}{4. Ergebnisse}
              \centering
                \vspace{2mm}
              \includegraphics[height=0.15\textheight]{plots/shower_nolegend.png}
                \vspace{2mm}
           \end{block}
       \end{column}
   \end{columns}
\end{frame}

%%% 1. Einführung in PROPOSAL

% Contents slide

\begin{frame}{Inhalt}
   \begin{columns}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=tugreen}
            \setbeamercolor{block body}{fg=darkgray, bg=tulight}

            \begin{block}{1. Einführung in PROPOSAL}
              \centering
                \vspace{2mm}
              \includegraphics[height=0.15\textheight]{plots/muon_path.pdf}
                \vspace{2mm}
            \end{block}
       \end{column}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=darkgray}
            \setbeamercolor{block body}{fg=darkgray, bg=gray}

            \begin{block}{2. Seltene Prozesse}

            \end{block}
       \end{column}
   \end{columns}
   \begin{columns}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=darkgray}
            \setbeamercolor{block body}{fg=darkgray, bg=gray}

            \begin{block}{3. Schauerpropagation}
            \end{block}
       \end{column}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=darkgray}
            \setbeamercolor{block body}{fg=darkgray, bg=gray}

           \begin{block}{4. Ergebnisse}
              \centering
                \vspace{2mm}
              \includegraphics[height=0.15\textheight]{plots/shower_nolegend.png}
                \vspace{2mm}
           \end{block}
       \end{column}
   \end{columns}
\end{frame}

\section{Einführung in PROPOSAL - Motivation}

\begin{frame}
      \begin{aquote}{"Der Leptonpropagator PROPOSAL" - Dissertation von Jan-Hendrik Köhne}
      Ziel ist es ein Monte-Carlo Programm zu entwickeln, welches einerseits die bei der \textcolor{red}{Propagation von Leptonen} auftauchende große Anzahl an Wechselwirkungen (einige tausend)
      mit \textcolor{red}{großer Genauigkeit} beschreibt und andererseits den \textcolor{red}{algorithmischen Fehler} so gering wie möglich hält. 
      \end{aquote}
\end{frame}

\begin{frame}
  \begin{columns}
    \column{0.62\textwidth}
    \begin{center}
      \begin{itemize}
        \setlength\itemsep{0.5em}
        \item \textbf{PROPOSAL}: \CC-Bibliothek mit Python Bindings
        \item Simulation der physikalischen Wechselwirkungen hochenergetischer Teilchen
        \begin{itemize}
          \item[$\rightarrow$] Energieverluste durch Interaktionen
          \item[$\rightarrow$] Vielfachstreuung
          \item[$\rightarrow$] Zerfall am Ende der Lebensdauer
        \end{itemize}
        \item Verschiedene Parametrisierungen für die physikalischen Wechselwirkungen verfügbar
        \begin{itemize}
          \item[$\rightarrow$] Untersuche Auswirkungen auf Simulationen
        \end{itemize}
      \end{itemize}
  \end{center}
  \column{0.35\textwidth}
      \begin{figure}
          \centering
          \includegraphics[width=0.8\linewidth]{plots/github.pdf}
           \captionsetup{format=myformat}
          \caption*{https://github.com/tudo-astroparticlephysics/PROPOSAL}
      \end{figure}
  \end{columns}

\end{frame}

\section{Einführung in PROPOSAL - Algorithmus}

\begin{frame}
  \Huge
  \begin{align*}
      \frac{\mathrm{d}\sigma}{\mathrm{d}v} \quad \underbrace{\longrightarrow}_{?} \quad \text{Energieverluste}
  \end{align*}\\[1cm]
  \large
  \centering
  mit $v$ dem relativen Energieverlust eines Primärteilchens
\end{frame}

\begin{frame}
  \huge
  \begin{align*}
      \underset{\text{stochastische Verluste}}{v > v_\text{cut}} &&  \underset{\text{kontinuierliche Verluste}}{v < v_\text{cut}}
  \end{align*}\\
  \vspace{20px}
    \Large
    \centering
  mit $v_\text{cut} = \text{min}\left[\sfrac{e_\text{cut}}{E}, v\prime_\text{cut} \right]$
\end{frame}


\begin{frame}[fragile]
  \begin{columns}
    \column{0.55\textwidth}
    \begin{center}
        \begin{tikzpicture}[node distance = 1.2cm, auto]
          % Place nodes
          \footnotesize

          \node [smallblock] (zero) {Startenergie $E_i$};
          \onslide<1>{\node [smallblockH] (zero) {Startenergie $E_i$};}

          \node [block, below of=zero] (one) {Würfle Energie $E_f$ bei welcher der nächste stoch. Verlust auftritt};
          \onslide<2>{\node [blockH, below of=zero] (one) {Würfle Energie $E_f$ bei welcher der nächste stoch. Verlust auftritt};}
      
          \node [block, below of=one] (two) {Berechnte Strecke bis zum nächsten stoch. Verlust};
          \onslide<3>{\node [blockH, below of=one] (two) {Berechnte Strecke bis zum nächsten stoch. Verlust};}
      
          \node [block, below of=two] (three) {Würfle Art des stoch. Verlustes};
          \onslide<4>{\node [blockH, below of=two] (three) {Würfle Art des stoch. Verlustes};}
      
          \node [block, below of=three] (four) {Würfle Größe des stoch. Verlustes};
          \onslide<5>{\node [blockH, below of=three] (four) {Würfle Größe des stoch. Verlustes};}

          \node [block, below of=four] (five) {Wiederhole bis $E < e_\text{low}$ oder Teilchen zerfallen};
          \onslide<6>{\node [blockH, below of=four] (five) {Wiederhole bis $E < e_\text{low}$ oder Teilchen zerfallen};}
      
          % Draw edges
          \path [line, ultra thick] (zero) -- (one);
          \path [line, ultra thick] (one) -- (two);
          \path [line, ultra thick] (two) -- (three);
          \path [line, ultra thick] (three) -- (four);
          \path [line, ultra thick] (four) -- (five);

          \onslide<6>
          { 
            \path [line, ultra thick] (five.east) -- +(1,0) |- node[pos=0.25] {} (one);
          }
        \end{tikzpicture}

  \end{center}


  \column{0.4\textwidth}
  \begin{overprint}
      \only<1>
      {      
          \centering
          \begin{block}{Initialisierung}
          Setze $E_i, \vec{r_i}, \vec{d_i}, \dots$ für zu propagierendes Teilchen
          \end{block}
      }

      \only<2>
      { 
        \centering
        \begin{block}{Energieintegral}
          \begin{align*}
            \int_{E_i}^{E_f} \frac{\sigma\left(E\right)}{-f\left(E\right)} \cdot \mathrm{d}E = -\log{\left( \xi \right)} 
          \end{align*}
          \begin{itemize}
            \item $\sigma\left(E\right) = \sigma_\text{\tiny tot, stoch}$ \\[0.25cm]
            \item $f\left(E\right) = \evalat{\frac{\mathrm{d}E}{\mathrm{d}x}}{\text{\tiny kont.}} \propto E \int_{v_\text{min}}^{v_\text{cut}} v \frac{\mathrm{d}\sigma}{\mathrm{d}v}\mathrm{d}v$  \\[0.25cm]
            \item $\xi \in \left[0, 1 \right)$
          \end{itemize}
        \end{block}
      }

      \only<3>
      { 
        \centering
        \begin{block}{Spurintegral}
          \begin{align*}
            x_f = x_i - \int_{E_i}^{E_f} \frac{\mathrm{d}E}{f\left(E\right)} 
          \end{align*}

          \begin{itemize}
            \item $f\left(E\right) = \evalat{\frac{\mathrm{d}E}{\mathrm{d}x}}{\text{\tiny kont.}} \propto E \int_{v_\text{min}}^{v_\text{cut}} v \frac{\mathrm{d}\sigma}{\mathrm{d}v}\mathrm{d}v$ 
          \end{itemize}        
        \end{block}
      }

      \only<4>
      { 
        \centering
        \begin{block}{Stochastischer Verlust}
          Vergleiche $\sigma_\text{tot, stoch}$ der verschiedenen Wechselwirkungen.\\
        \end{block}
      }

      \only<5>
      { 
        \centering
        \begin{block}{Stochastischer Verlust}
          \begin{align*}
              \frac{1}{\sigma_{i, \text{tot}}} \int_{v_\text{cut}}^v \frac{\mathrm{d}\sigma_i}{\mathrm{d}v} = \xi
          \end{align*}
        \end{block}
        \begin{itemize}
            \item $i \hat{=}$ zuvor bestimmte Wechselwirkung \\[0.25cm]
            \item $\xi \in \left[0, 1 \right)$
        \end{itemize}
      }
  \end{overprint}
  \end{columns}
\end{frame}

\begin{frame}
  \begin{figure}
      \begin{overprint}
      \centering
      \only<1>{\includegraphics[height=0.9\textheight, trim=0.5cm 0.5cm 0.4cm 0.5cm,clip=true]{plots/cont_rand_0.pdf}}
      \only<2>{\includegraphics[height=0.9\textheight, trim=0.5cm 0.5cm 0.4cm 0.5cm,clip=true]{plots/cont_rand_1.pdf}}
      \only<3>{\includegraphics[height=0.9\textheight, trim=0.5cm 0.5cm 0.4cm 0.5cm,clip=true]{plots/cont_rand_2.pdf}}
      \only<4>{\includegraphics[height=0.9\textheight, trim=0.5cm 0.5cm 0.4cm 0.5cm,clip=true]{plots/cont_rand_3.pdf}}
      \caption*{Propagation von $\num{e4}$ Myonen einer Startenergie von $\SI{e8}{\mega\electronvolt}$ durch $\SI{300}{\metre}$ Stein.}
      \label{fig:1}
      \end{overprint}
  \end{figure}
\end{frame}

\begin{frame}
  \begin{figure}
      \centering
      \includegraphics[height=0.9\textheight, trim=0.5cm 0.5cm 0.4cm 2cm,clip=true]{{plots/spectra/all_standardrock_stats_1000000_Emin_8.0_Emax_8.0_index_1}.pdf}
      \caption*{Energieverluste von $\num{e6}$ Myonen einer Startenergie von $\SI{e8}{\mega\electronvolt}$ durch $\SI{100}{\metre}$ Stein.}
      \label{fig:1}
  \end{figure}
\end{frame}

%%% 2. Seltene Prozesse

% Contents slide

\begin{frame}{Inhalt}
   \begin{columns}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=darkgray}
            \setbeamercolor{block body}{fg=darkgray, bg=gray}

            \begin{block}{1. Einführung in PROPOSAL}
              \centering
                \vspace{2mm}
              \includegraphics[height=0.15\textheight]{plots/muon_path.pdf}
                \vspace{2mm}
            \end{block}
       \end{column}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=tugreen}
            \setbeamercolor{block body}{fg=darkgray, bg=tulight}

            \begin{block}{2. Seltene Prozesse}

            \end{block}
       \end{column}
   \end{columns}
   \begin{columns}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=darkgray}
            \setbeamercolor{block body}{fg=darkgray, bg=gray}

            \begin{block}{3. Schauerpropagation}
            \end{block}
       \end{column}
       \begin{column}{0.4\textwidth}

            \setbeamercolor{block title}{fg=white, bg=darkgray}
            \setbeamercolor{block body}{fg=darkgray, bg=gray}

           \begin{block}{4. Ergebnisse}
              \centering
                \vspace{2mm}
              \includegraphics[height=0.15\textheight]{plots/shower_nolegend.png}
                \vspace{2mm}
           \end{block}
       \end{column}
   \end{columns}
\end{frame}

%%% 3. Schauerpropagation

%%% 4. Ergebnisse


%%% End

\begin{frame}[t]
  \vspace{-5mm}
  \begin{minipage}[t][0.8\textheight][t]{\textwidth}
      \begin{columns}
    \column{0.5\textwidth}
      \begin{figure}
          \centering
          \includegraphics[width=0.6\linewidth]{plots/github.pdf}
           \captionsetup{format=myformat}
          \caption*{https://github.com/tudo-\\astroparticlephysics/PROPOSAL}
      \end{figure}
    \column{0.5\textwidth}
      \begin{figure}
          \centering
          \includegraphics[width=0.6\linewidth]{plots/arxiv.pdf}
          \captionsetup{format=myformat}
          \caption*{https://arxiv.org/abs/1809.07740 \\ \phantom{astroparticlephysics/PROPOSAL}}
      \end{figure}
  \end{columns}
  \end{minipage}
  \vfill
  \begin{minipage}{\textwidth}
      \smaller
      \begin{center}
      PROPOSAL may be modified and distrubuted under terms of a modified LGPL license.\\More information on our GitHub page.
      \end{center}
  \end{minipage}
\end{frame}
\end{document}
